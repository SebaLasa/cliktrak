<div class="container">
    <a href="#/campaigns" class="btn btn-default">Volver</a>

    <h2>{{pageTitle}}</h2>

    <form ng-submit="save()" name="campaignEditorForm" class="form" role="form">
        <div class="row">
            <div class="col-md-6">
                <div class="input-group">
                    <label for="name">Nombre</label>
                    <input type="text" id="name" name="name" ng-model="campaign.name" required maxlength="80"
                           class="form-control"/>
                </div>
            </div>
        </div>
        <h3>Selección de Página</h3>

        <div class="form-group">
            <label>
                <input type="radio" name="pageType" ng-model="pageType" ng-value="'page'" ng-click="page = null"/>
                Páginas
            </label>
            <label>
                <input type="radio" name="pageType" ng-model="pageType" ng-value="'customPage'" ng-click="page = null"/>
                Páginas personalizadas
            </label>
        </div>
        <div ng-show="pageType" class="row">
            <div class="col-md-1"></div>
            <div class="col-md-3"><h4>Nombre</h4></div>
        </div>
        <div ng-show="pageType == 'page'" ng-repeat="page in pages" class="row" ng-click="$parent.page = page">
            <div class="col-md-1">
                <input type="radio" name="page{{page._id}}" ng-model="$parent.page" ng-value="page"/>
            </div>
            <div class="col-md-3">{{page.name}}</div>
        </div>
        <div ng-show="pageType == 'customPage'" ng-repeat="customPage in customPages" class="row"
             ng-click="$parent.page = customPage">
            <div class="col-md-1">
                <input type="radio" name="customPage" ng-model="$parent.page" ng-value="customPage"/>
            </div>
            <div class="col-md-3">{{customPage.name}}</div>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-4">
                <div class="input-group">
                    <label for="subject">Asunto</label>
                    <input type="text" id="subject" name="subject" ng-model="email.subject" required maxlength="100"
                           class="form-control"/>
                </div>
            </div>
            <div class="col-md-3">
                <a ng-click="addFieldToMessage('url')" class="btn btn-primary">URL a la página</a>
            </div>
        </div>
        <br/>

        <div class="row">
            <div class="col-md-9">
                 <span ng-show="formSubmitted && !campaignEditorForm.message.$valid" class="red">
                    El e-mail debe tener un contenido para poder enviarse.
                </span>
                <textarea id="message" name="message" ng-model="email.message" required ui-tinymce></textarea>
            </div>
            <div class="col-md-3">

            </div>
        </div>
        <div class="form-group">

        </div>
        <div class="row">
            <div class="col-md-3">
                <h4>Campos de contactos</h4>
            </div>
            <div class="col-md-9">
                <div class="panel">
                    <a ng-click="addFieldToMessage('name')" class="btn btn-primary btn-sm">Nombre</a>
                    <a ng-click="addFieldToMessage('surname')" class="btn btn-primary btn-sm">Apellido</a>
                    <a ng-click="addFieldToMessage('email')" class="btn btn-primary btn-sm">Email</a>
                    <a ng-click="addFieldToMessage('birthDay')" class="btn btn-primary btn-sm">Cumpleaños</a>
                    <a ng-click="addFieldToMessage('mobilePhone')" class="btn btn-primary btn-sm">Celular</a>
                    <a ng-click="addFieldToMessage('telephone')" class="btn btn-primary btn-sm">Teléfono</a>
                    <a ng-click="addFieldToMessage('address')" class="btn btn-primary btn-sm">Direccion</a>
                    <a ng-click="addFieldToMessage('city')" class="btn btn-primary btn-sm">Localidad</a>
                    <a ng-click="addFieldToMessage('state')" class="btn btn-primary btn-sm">Provincia</a>
                </div>
            </div>
        </div>
        <div class="row" ng-show="pageType == 'customPage'">
            <div class="col-md-3">
                <h4>Valores personalizados</h4>
            </div>
            <div class="col-md-9">
                <custom-values selected="customValue"></custom-values>
                <a ng-click="addCustomValue(customValue)" class="btn btn-primary">
                    <span class="glyphicon glyphicon-plus"></span>
                </a>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="input-group">
                    <label for="start">Incio</label>
                    <input type="date" id="start" name="start" ng-model="email.dateStart" required
                           class="form-control"/>
                </div>
            </div>
            <div class="col-md-6">
                <div class="input-group">
                    <label for="end">Finalización</label>
                    <input type="date" id="end" name="end" ng-model="email.dateEnd" required class="form-control"/>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3">
                <input type="checkbox" id="monday" name="monday" ng-model="days.monday"/>
                <label for="monday">Lunes</label>
            </div>
            <div class="col-md-3">
                <input type="checkbox" id="tuesday" name="tuesday" ng-model="days.tuesday"/>
                <label for="tuesday">Martes</label>
            </div>
            <div class="col-md-3">
                <input type="checkbox" id="wednesday" name="wednesday" ng-model="days.wednesday"/>
                <label for="wednesday">Miércoles</label>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3">
                <input type="checkbox" id="thursday" name="thursday" ng-model="days.thursday"/>
                <label for="thursday">Jueves</label>
            </div>
            <div class="col-md-3">
                <input type="checkbox" id="friday" name="friday" ng-model="days.friday"/>
                <label for="friday">Viernes</label>
            </div>
            <div class="col-md-3">
                <input type="checkbox" id="saturday" name="saturday" ng-model="days.saturday"/>
                <label for="saturday">Sábado</label>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3">
                <input type="checkbox" id="sunday" name="sunday" ng-model="days.sunday"/>
                <label for="sunday">Domingo</label>
            </div>
        </div>
        <div class="input-group">
            <label for="startTime">Hora de Inicio</label>
            <input type="time" id="startTime" name="startTime" ng-model="email.startTime" class="form-control"/>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-8">
                <h3>
                    Selección de Contactos
                    <small ng-show="pageType == 'page'">
                        <label for="allContacts">Todos los contactos</label>
                        <input type="checkbox" id="allContacts" name="allContacts" ng-model="allContacts"
                               ng-change="selectAllContacts()"/>
                    </small>
                </h3>
            </div>
        </div>
        <div class="row" ng-show="pageType == 'customPage'">
            <div class="col-md-3">
                <custom-values selected="email.paramToMatchWithContacts"></custom-values>
            </div>
            <div class="col-md-1">
                ->
            </div>
            <div class="col-md-3">
                <select id="contactFieldMatch" name="contactFieldMatch" ng-model="email.contactFieldMatch"
                        class="form-control">
                    <option value="email">Email</option>
                    <option value="mobilePhone">Celular</option>
                </select>
            </div>
        </div>
        <div ng-show="pageType == 'page'">
            <div class="row">
                <div class="col-md-1"></div>
                <div class="col-md-2"><h4>Nombre</h4></div>
                <div class="col-md-2"><h4>Apellido</h4></div>
            </div>
            <div ng-repeat="contact in contacts" ng-click="contact.selected = !contact.selected" class="row">
                <div class="col-md-1"><input type="checkbox" ng-model="contact.selected"/></div>
                <div class="col-md-2">{{contact.name}}</div>
                <div class="col-md-2">{{contact.surname}}</div>
            </div>
        </div>
        <hr>
        <input type="submit" ng-click="setSubmitted()" value="Programar Envio" class="btn btn-primary"/>
    </form>
</div>